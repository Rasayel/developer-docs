import { executeAllTasks } from '../../tasks/runner.js';
import { determineTmpDirectoryTask } from '../../tasks/all/determineTmpDir.js';
import { fetchTemplateTask } from '../../tasks/all/fetchTemplate.js';
import { installDependenciesTask } from '../../tasks/all/installDependencies.js';
import { unzipTemplateTask } from '../../tasks/all/unzipTemplate.js';
import { verifyDestinationAvailableTask } from '../../tasks/all/verifyDestinationAvailable.js';
import { tmpLocation } from '../../template/tmp.js';
import { selectPackageManagerTask } from '../../tasks/all/selectPackageManager.js';

async function eject(config) {
    const destination = tmpLocation(config.destination);
    await executeAllTasks([
        determineTmpDirectoryTask({
            ...config,
            // Slight hack to set the tmp directory to the target location.
            // This speeds up the installation
            tmpDirectory: destination,
        }),
        selectPackageManagerTask(config),
        verifyDestinationAvailableTask(config),
        fetchTemplateTask(config),
        unzipTemplateTask(config),
        installDependenciesTask(),
    ]);
}

export { eject as default };
//# sourceMappingURL=index.js.map
