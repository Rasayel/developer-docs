import chokidar from 'chokidar';

function watchFiles(paths, callback) {
    return new Promise((resolve, reject) => {
        const watcher = chokidar.watch(paths.filter((path) => !!path), {
            persistent: true,
        });
        const handler = debounce(() => {
            callback().catch((error) => reject(error));
        });
        watcher.on('add', handler);
        watcher.on('change', handler);
        watcher.on('unlink', handler);
    });
}
function debounce(func, timeout = 300) {
    let timer;
    return () => {
        clearTimeout(timer);
        timer = setTimeout(() => {
            func();
        }, timeout);
    };
}

export { watchFiles };
//# sourceMappingURL=watch.js.map
