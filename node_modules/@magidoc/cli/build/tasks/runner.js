import { Listr, PRESET_TIMER } from 'listr2';

async function executeAllTasks(tasks, config = {
    ctx: undefined,
    silent: false,
}) {
    const listr = new Listr(tasks.map((task) => ({
        title: task.title,
        enabled: task.enabled,
        options: {
            persistentOutput: true,
        },
        task: (ctx, wrapper) => task.executor(ctx, {
            output: (message) => (wrapper.output = message),
            skip: (message) => wrapper.skip(message),
        }),
    })), {
        exitOnError: true,
        silentRendererCondition: config.silent,
        rendererOptions: {
            showErrorMessage: false,
            formatOutput: 'wrap',
            timer: PRESET_TIMER,
        },
    });
    return await listr.run(config.ctx);
}

export { executeAllTasks };
//# sourceMappingURL=runner.js.map
